<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sam3x8eHardwareAPI: src/EEFC/eefc.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sam3x8eHardwareAPI
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_e7de26d1a0c474f5efc7344d88ae13c8.html">EEFC</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">eefc.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>EEFC (enhanced flash controller) hardware interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="eefc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_flash_descriptor.html">FlashDescriptor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad5602763931047177db6d684a319adfe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eefc_8h.html#ad5602763931047177db6d684a319adfe">FLASH_CONTROLLER_COUNT</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ad5602763931047177db6d684a319adfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af540a1a2e4ae1a4821372a27a8bd649f"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eefc_8h.html#af540a1a2e4ae1a4821372a27a8bd649f">getFlashStartAddress</a> (uint16_t controller)</td></tr>
<tr class="separator:af540a1a2e4ae1a4821372a27a8bd649f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae83f83469177009852ecf3217adca23d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eefc_8h.html#ae83f83469177009852ecf3217adca23d">readFlashDescriptor</a> (struct <a class="el" href="struct_flash_descriptor.html">FlashDescriptor</a> *fDesc, uint16_t controller, uint32_t lenPlanesMax, uint32_t lenLockRegionMax)</td></tr>
<tr class="separator:ae83f83469177009852ecf3217adca23d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d057595847c4787eca366f1dfd59f4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eefc_8h.html#af0d057595847c4787eca366f1dfd59f4">readPage</a> (uint16_t controller, uint16_t page, uint8_t *buffer)</td></tr>
<tr class="separator:af0d057595847c4787eca366f1dfd59f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a897f95f59fe634da0b32ccb8e84bcdb4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="eefc_8h.html#a897f95f59fe634da0b32ccb8e84bcdb4">writePage</a> (uint16_t controller, uint16_t page, uint8_t *buffer)</td></tr>
<tr class="separator:a897f95f59fe634da0b32ccb8e84bcdb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3d3b72ce03b3045386eec2ec31701a4c"><td class="memItemLeft" align="right" valign="top"><a id="a3d3b72ce03b3045386eec2ec31701a4c"></a>
struct <a class="el" href="struct_flash_descriptor.html">FlashDescriptor</a>&#160;</td><td class="memItemRight" valign="bottom"><b>FlashDescriptor</b></td></tr>
<tr class="separator:a3d3b72ce03b3045386eec2ec31701a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>EEFC (enhanced flash controller) hardware interface. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad5602763931047177db6d684a319adfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5602763931047177db6d684a319adfe">&#9670;&nbsp;</a></span>FLASH_CONTROLLER_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASH_CONTROLLER_COUNT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>the number of flash controllers on the sam3x8e </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af540a1a2e4ae1a4821372a27a8bd649f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af540a1a2e4ae1a4821372a27a8bd649f">&#9670;&nbsp;</a></span>getFlashStartAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* getFlashStartAddress </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>controller</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>get the start address for controller </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>the controller for which the start address is to be fetech. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the address at which said flash memory starts </dd></dl>

</div>
</div>
<a id="ae83f83469177009852ecf3217adca23d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae83f83469177009852ecf3217adca23d">&#9670;&nbsp;</a></span>readFlashDescriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void readFlashDescriptor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_flash_descriptor.html">FlashDescriptor</a> *&#160;</td>
          <td class="paramname"><em>fDesc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lenPlanesMax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lenLockRegionMax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read the flash descriptor form the EEFC controller. and populate the flash descriptor structure </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fDesc</td><td>the flash descriptor strcture to be populated by the function call. Note, you must have pre allocated, bytesInPlane and bytesPerLockRegion arrays </td></tr>
    <tr><td class="paramname">controller</td><td>the controller on which you want to read the flash descriptor </td></tr>
    <tr><td class="paramname">lenPlanesMax</td><td>the max number of plane words that can be placed in bytesInPlane array. </td></tr>
    <tr><td class="paramname">lenLockRegionMax</td><td>the max number of lock region words that can be placed in bytesPerLockRegion </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the flash descriptor structure will be filled out. lenBytesInPlane and lenBytesPerLockRegion will be set to the number of actual values in there respective arrays. if lenBytesInPlane or lenBytesPerLockRegion is equal to there max counterparts, there may be additional regions / planes on the flash chip. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="struct_flash_descriptor.html">FlashDescriptor</a> </dd>
<dd>
<a class="el" href="eefc_8h.html#ad5602763931047177db6d684a319adfe">FLASH_CONTROLLER_COUNT</a> </dd></dl>

</div>
</div>
<a id="af0d057595847c4787eca366f1dfd59f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d057595847c4787eca366f1dfd59f4">&#9670;&nbsp;</a></span>readPage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool readPage </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read the specified page from the specified controller </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>the controller from which to read </td></tr>
    <tr><td class="paramname">page</td><td>the page which is to be read </td></tr>
    <tr><td class="paramname">buffer</td><td>in to which the page is read. MUST be large enough to hold a page of data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="eefc_8h.html#ae83f83469177009852ecf3217adca23d">readFlashDescriptor</a> </dd></dl>

</div>
</div>
<a id="a897f95f59fe634da0b32ccb8e84bcdb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a897f95f59fe634da0b32ccb8e84bcdb4">&#9670;&nbsp;</a></span>writePage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool writePage </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>write a page to the specified controller at the specified page address </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">controller</td><td>the controller to which you whish to write </td></tr>
    <tr><td class="paramname">page</td><td>the page you want to write </td></tr>
    <tr><td class="paramname">buffer</td><td>a buffer containing the data to be writen to the page. MUST be as large as a page </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="eefc_8h.html#ae83f83469177009852ecf3217adca23d">readFlashDescriptor</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
